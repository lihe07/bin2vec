# /etc/portage/binrepos.conf
#
# Remote binary package hosts (BinHosts) for the bin2vec Gentoo build image.
#
# The container runs on amd64.  All entries below serve pre-built amd64
# binary packages for the 23.0 profile tree.  Packages installed during
# `docker build` (GCC slots, Clang/LLVM, crossdev and their deps) are fetched
# as .gpkg archives instead of being compiled from source, slashing build time
# from hours to minutes.
#
# Priority ordering (higher = preferred):
#   9999  official Gentoo CDN  – always authoritative, GPG-signed
#   8000  regional mirrors     – faster download speeds by geography
#
# Portage tries the highest-priority host first; if a package is not found
# there it falls through to lower-priority hosts automatically.
#
# URL pattern:
#   https://distfiles.gentoo.org/releases/amd64/binpackages/23.0/<variant>/
#
# Available variants for amd64:
#   x86-64       generic baseline (-march=x86-64 -mtune=generic), works on
#                every x86-64 CPU.  Used here because crossdev containers may
#                run on any x86-64 hardware.
#   x86-64-v3   AVX2/FMA build; ~5% faster but requires Haswell or newer.
#                Uncomment if you know your build host supports x86-64-v3.
#
# Signature verification:
#   verify-signature = true requires `app-portage/getuto` to have been run at
#   least once so the Gentoo Release Engineering GPG keyring is in place.
#   During `docker build` the keyring is bootstrapped automatically by emerge
#   when getbinpkg is active, so this is safe to enable.

# ---------------------------------------------------------------------------
# OFFICIAL GENTOO CDN  (Anycast, globally distributed)
# Source: https://wiki.gentoo.org/wiki/Gentoo_Binary_Host_Quickstart
# Updated: daily for amd64/arm64, weekly for other arches
# ---------------------------------------------------------------------------

[gentoo-cdn]
priority    = 9999
sync-uri    = https://distfiles.gentoo.org/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# Uncomment for x86-64-v3 (AVX2) optimised packages on modern build hosts:
#[gentoo-cdn-v3]
#priority    = 9999
#sync-uri    = https://distfiles.gentoo.org/releases/amd64/binpackages/23.0/x86-64-v3/
#verify-signature = true

# ---------------------------------------------------------------------------
# OFFICIAL MIRRORS  (geographically distributed; unsigned mirrors of the CDN)
# These reduce load on the central CDN and may be faster depending on location.
# verify-signature is still true because the .gpkg files carry embedded sigs.
# ---------------------------------------------------------------------------

# --- United Kingdom ---
# University of Kent Mirror Service
# Source: https://wiki.gentoo.org/wiki/Gentoo_Binary_Host_Quickstart (UK example)
[mirror-uk]
priority    = 8000
sync-uri    = https://www.mirrorservice.org/sites/distfiles.gentoo.org/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# --- United States ---
# Oregon State University Open Source Lab (OSUOSL)
# One of the largest and most reliable open-source mirrors in North America.
[mirror-us-osuosl]
priority    = 8000
sync-uri    = https://gentoo.osuosl.org/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# kernel.org (global Anycast, backed by multiple datacenters)
[mirror-us-kernel]
priority    = 7900
sync-uri    = https://mirrors.kernel.org/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# --- Germany ---
# RWTH Aachen University – one of the most reliable DE university mirrors
[mirror-de-rwth]
priority    = 8000
sync-uri    = https://ftp.halifax.rwth-aachen.de/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# FAU Erlangen-Nürnberg
[mirror-de-fau]
priority    = 7900
sync-uri    = https://ftp.fau.de/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# --- China ---
# Aliyun (Alibaba Cloud) – fastest mirror within mainland China
[mirror-cn-aliyun]
priority    = 8000
sync-uri    = https://mirrors.aliyun.com/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# TUNA (Tsinghua University) – widely used academic mirror in CN
[mirror-cn-tuna]
priority    = 7900
sync-uri    = https://mirrors.tuna.tsinghua.edu.cn/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# USTC (University of Science and Technology of China)
[mirror-cn-ustc]
priority    = 7800
sync-uri    = https://mirrors.ustc.edu.cn/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# --- Netherlands ---
# LeaseWeb (Anycast: Amsterdam + San Francisco + Dallas + Washington DC)
[mirror-nl-leaseweb]
priority    = 8000
sync-uri    = https://mirror.leaseweb.com/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true

# --- Australia ---
# Internode (Adelaide) – primary AU mirror
[mirror-au-internode]
priority    = 8000
sync-uri    = https://mirror.internode.on.net/pub/gentoo/releases/amd64/binpackages/23.0/x86-64/
verify-signature = true
